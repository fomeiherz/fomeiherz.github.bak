<!DOCTYPE html>
<html lang="zh-Hans">
  <head>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">















  <link rel="alternate" href="/atom.xml" title="一叶知秋的博客">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.9.0" />



<link rel="canonical" href="https://blog.fomeiherz.top/"/>



  <link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css" />




  <link rel="stylesheet" type="text/css" href="/lib/nprogress/nprogress.min.css" />



<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.9.0" />



  



  <script id="baidu_push">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>








<script>
  window.config = {"title":"一叶知秋的博客","subtitle":"不迷失，不彷徨","description":null,"author":"Fomeiherz","language":"zh-Hans","timezone":null,"url":"https://blog.fomeiherz.top","root":"/","permalink":":year/:month/:day/:title/","permalink_defaults":null,"source_dir":"source","public_dir":"public","tag_dir":"tags","archive_dir":"archives","category_dir":"categories","code_dir":"downloads/code","i18n_dir":":lang","skip_render":null,"new_post_name":":title.md","default_layout":"post","titlecase":false,"external_link":true,"filename_case":0,"render_drafts":false,"post_asset_folder":false,"relative_link":false,"future":true,"highlight":{"enable":true,"auto_detect":false,"line_number":true,"tab_replace":null,"first_line_number":"always1"},"default_category":"uncategorized","category_map":null,"tag_map":null,"date_format":"YYYY-MM-DD","time_format":"HH:mm:ss","per_page":10,"pagination_dir":"page","theme":"even","deploy":{"type":"git","repo":"https://github.com/fomeiherz/fomeiherz.github.io.git","branch":"master"},"ignore":[],"keywords":null,"index_generator":{"per_page":10,"order_by":"-date","path":""},"search":{"path":"search.xml","field":"post","format":"html","limit":"10000"},"archive_generator":{"per_page":10,"yearly":true,"monthly":true,"daily":false},"category_generator":{"per_page":10},"feed":{"type":"atom","limit":20,"hub":"","content":true,"content_limit":140,"content_limit_delim":"","path":"atom.xml"},"tag_generator":{"per_page":10},"marked":{"gfm":true,"pedantic":false,"sanitize":false,"tables":true,"breaks":true,"smartLists":true,"smartypants":true,"modifyAnchors":"","autolink":true},"server":{"port":4000,"log":false,"ip":"0.0.0.0","compress":false,"header":true},"since":2015,"favicon":"/favicon.ico","rss":"default","menu":{"Home":"/"},"color":"Default","toc":true,"fancybox":true,"pjax":true,"copyright":{"enable":true,"license":"<a rel=\"license\" href=\"http://creativecommons.org/licenses/by-nc/4.0/\" target=\"_blank\">知识共享署名-非商业性使用 4.0 国际许可协议</a>"},"reward":{"enable":false,"qrCode":{"wechat":null,"alipay":null}},"social":{"email":"your@email.com","stack-overflow":null,"twitter":null,"facebook":null,"linkedin":null,"google":null,"github":"https://github.com/ahonn","weibo":null,"zhihu":null,"douban":null,"pocket":null,"tumblr":null,"instagram":null},"leancloud":{"app_id":null,"app_key":null},"baidu_analytics":null,"baidu_verification":null,"google_analytics":null,"google_verification":null,"disqus_shortname":null,"changyan":{"appid":null,"appkey":null},"livere_datauid":null,"version":"2.9.0"};
</script>

    <title> 一叶知秋的博客 </title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">一叶知秋的博客</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/">
        <li class="mobile-menu-item">
          
          
            首页
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">一叶知秋的博客</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/">
            
            
              首页
            
          </a>
        </li>
      
    </ul>
  
</nav>

      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  <section id="posts" class="posts">
    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2018/07/08/Apriori-Algorithm/">Apriori Algorithm</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2018-07-08
        </span>
        
        
      </div>
    </header>

    
    


    <div class="post-content">
      
        
        

        
          <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">&quot;&quot;&quot;</span><br><span class="line">Apriori exercise.</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">def load_dataset():</span><br><span class="line">    return [[1, 3, 4], [2, 3, 5], [1, 2, 3, 5], [2, 5]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">输入：源数据</span><br><span class="line">功能：从源数据提取候选项</span><br><span class="line">返回：1item是大小为1的所有候选项集的集合</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">def create_1item(dataset):</span><br><span class="line">    k_items = []</span><br><span class="line">    for transaction in dataset:</span><br><span class="line">        for item in transaction:</span><br><span class="line">            if [item] not in k_items:</span><br><span class="line">                k_items.append([item])</span><br><span class="line">    k_items.sort()</span><br><span class="line">    return list(map(frozenset, k_items))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">输入：</span><br><span class="line">    总数据集</span><br><span class="line">    k项的所有组合</span><br><span class="line">    最小支持度</span><br><span class="line">功能：计算k_items中的项集在数据集中的支持度</span><br><span class="line">输出：</span><br><span class="line">    满足支持度的候选项</span><br><span class="line">    各个候选项支持度</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">def scan_dataset(dataset, k_items, min_support):</span><br><span class="line">    k_item_dict = &#123;&#125;</span><br><span class="line">    for transaction in dataset:</span><br><span class="line">        for k_item in k_items:</span><br><span class="line">            # 对于每一个候选项集k_item，检查是否是transaction的一部分</span><br><span class="line">            if k_item.issubset(transaction):</span><br><span class="line">                k_item_dict[k_item] = k_item_dict.get(k_item, 0) + 1</span><br><span class="line">    # 总记录数</span><br><span class="line">    dataset_count = float(len(dataset))</span><br><span class="line">    result_list = []</span><br><span class="line">    support_dict = &#123;&#125;</span><br><span class="line">    for k_item in k_item_dict:</span><br><span class="line">        # 每个项集的支持度 = 包含该项集的记录 / 总记录</span><br><span class="line">        support = k_item_dict[k_item] / dataset_count</span><br><span class="line">        # 将满足最小支持度的项集，加入retList</span><br><span class="line">        if support &gt;= min_support:</span><br><span class="line">            result_list.insert(0, k_item)</span><br><span class="line">        # 汇总支持度数据</span><br><span class="line">        support_dict[k_item] = support</span><br><span class="line">    return result_list, support_dict</span><br><span class="line"></span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    k_items = create_1item(load_dataset())</span><br><span class="line">    result_tuple = scan_dataset(load_dataset(), k_items, 0.5)</span><br><span class="line">    # print(type(result_tuple))</span><br><span class="line">    print(result_tuple[0])</span><br><span class="line">    print(result_tuple[1])</span><br></pre></td></tr></table></figure>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2018/07/04/基于用户的协同过滤算法/">基于用户的协同过滤算法</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2018-07-04
        </span>
        
        
      </div>
    </header>

    
    


    <div class="post-content">
      
        
        

        
          <p>电影点赞数据：<a href="https://grouplens.org/datasets/movielens/" target="_blank" rel="noopener">https://grouplens.org/datasets/movielens/</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding=utf-8 -*-</span><br><span class="line"></span><br><span class="line">import math</span><br><span class="line">import sys</span><br><span class="line">from texttable import Texttable</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#</span><br><span class="line">#   使用 |A&amp;B|/sqrt(|A||B|)计算余弦距离</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">def calcCosDistSpe(user1, user2):</span><br><span class="line">    avg_x = 0.0</span><br><span class="line">    avg_y = 0.0</span><br><span class="line">    for key in user1:</span><br><span class="line">        avg_x += key[1]</span><br><span class="line">    avg_x = avg_x / len(user1)</span><br><span class="line"></span><br><span class="line">    for key in user2:</span><br><span class="line">        avg_y += key[1]</span><br><span class="line">    avg_y = avg_y / len(user2)</span><br><span class="line"></span><br><span class="line">    u1_u2 = 0.0</span><br><span class="line">    for key1 in user1:</span><br><span class="line">        for key2 in user2:</span><br><span class="line">            if key1[1] &gt; avg_x and key2[1] &gt; avg_y and key1[0] == key2[0]:</span><br><span class="line">                u1_u2 += 1</span><br><span class="line">    u1u2 = len(user1) * len(user2) * 1.0</span><br><span class="line">    sx_sy = u1_u2 / math.sqrt(u1u2)</span><br><span class="line">    return sx_sy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#</span><br><span class="line">#   计算余弦距离</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">def calcCosDist(user1, user2):</span><br><span class="line">    sum_x = 0.0</span><br><span class="line">    sum_y = 0.0</span><br><span class="line">    sum_xy = 0.0</span><br><span class="line">    for key1 in user1:</span><br><span class="line">        for key2 in user2:</span><br><span class="line">            if key1[0] == key2[0]:</span><br><span class="line">                sum_xy += key1[1] * key2[1]</span><br><span class="line">                sum_y += key2[1] * key2[1]</span><br><span class="line">                sum_x += key1[1] * key1[1]</span><br><span class="line"></span><br><span class="line">    if sum_xy == 0.0:</span><br><span class="line">        return 0</span><br><span class="line">    sx_sy = math.sqrt(sum_x * sum_y)</span><br><span class="line">    return sum_xy / sx_sy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#   相似余弦距离</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">def calcSimlaryCosDist(user1, user2):</span><br><span class="line">    sum_x = 0.0</span><br><span class="line">    sum_y = 0.0</span><br><span class="line">    sum_xy = 0.0</span><br><span class="line">    avg_x = 0.0</span><br><span class="line">    avg_y = 0.0</span><br><span class="line">    for key in user1:</span><br><span class="line">        avg_x += key[1]</span><br><span class="line">    avg_x = avg_x / len(user1)</span><br><span class="line"></span><br><span class="line">    for key in user2:</span><br><span class="line">        avg_y += key[1]</span><br><span class="line">    avg_y = avg_y / len(user2)</span><br><span class="line"></span><br><span class="line">    for key1 in user1:</span><br><span class="line">        for key2 in user2:</span><br><span class="line">            if key1[0] == key2[0]:</span><br><span class="line">                sum_xy += (key1[1] - avg_x) * (key2[1] - avg_y)</span><br><span class="line">                sum_y += (key2[1] - avg_y) * (key2[1] - avg_y)</span><br><span class="line">        sum_x += (key1[1] - avg_x) * (key1[1] - avg_x)</span><br><span class="line"></span><br><span class="line">    if sum_xy == 0.0:</span><br><span class="line">        return 0</span><br><span class="line">    sx_sy = math.sqrt(sum_x * sum_y)</span><br><span class="line">    return sum_xy / sx_sy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#</span><br><span class="line">#   读取文件</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">def readFile(file_name):</span><br><span class="line">    contents_lines = []</span><br><span class="line">    f = open(file_name, &quot;r&quot;)</span><br><span class="line">    contents_lines = f.readlines()</span><br><span class="line">    f.close()</span><br><span class="line">    return contents_lines</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#</span><br><span class="line">#   解压rating信息，格式：用户id,电影id,用户rating,时间</span><br><span class="line">#   输入：数据集合</span><br><span class="line">#   输出:已经解压的排名信息</span><br><span class="line">#</span><br><span class="line">def getRatingInformation(ratings):</span><br><span class="line">    rates = []</span><br><span class="line">    for line in ratings[1:]:</span><br><span class="line">        rate = line.split(&quot;,&quot;)</span><br><span class="line">        rates.append([int(rate[0]), int(rate[1]), float(rate[2])])</span><br><span class="line">    return rates</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#</span><br><span class="line">#   生成用户评分的数据结构</span><br><span class="line">#</span><br><span class="line">#   输入:所以数据 [[2,1,5],[2,4,2]...]</span><br><span class="line">#   输出:1.用户打分字典 2.电影字典</span><br><span class="line">#   使用字典，key是用户id，value是用户对电影的评价，</span><br><span class="line">#   rate_dic[2]=[(1,5),(4,2)].... 表示用户2对电影1的评分是5，对电影4的评分是2</span><br><span class="line">#</span><br><span class="line">def createUserRankDic(rates):</span><br><span class="line">    user_rate_dic = &#123;&#125;</span><br><span class="line">    item_to_user = &#123;&#125;</span><br><span class="line">    for i in rates:</span><br><span class="line">        user_rank = (i[1], i[2])</span><br><span class="line">        if i[0] in user_rate_dic:</span><br><span class="line">            user_rate_dic[i[0]].append(user_rank)</span><br><span class="line">        else:</span><br><span class="line">            user_rate_dic[i[0]] = [user_rank]</span><br><span class="line"></span><br><span class="line">        if i[1] in item_to_user:</span><br><span class="line">            item_to_user[i[1]].append(i[0])</span><br><span class="line">        else:</span><br><span class="line">            item_to_user[i[1]] = [i[0]]</span><br><span class="line"></span><br><span class="line">    return user_rate_dic, item_to_user</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#</span><br><span class="line">#   计算与指定用户最相近的邻居</span><br><span class="line">#   输入：</span><br><span class="line">#       指定用户ID</span><br><span class="line">#       所有用户数据。用户字典：dic[用户id]=[(电影id,电影评分)...]</span><br><span class="line">#       所有物品数据。电影字典：dic[电影id]=[用户id1,用户id2...]</span><br><span class="line">#   输出：与指定用户最相邻的邻居列表</span><br><span class="line">#</span><br><span class="line">def calcNearestNeighbor(userid, users_dic, item_dic):</span><br><span class="line">    neighbors = []</span><br><span class="line">    # neighbors.append(userid)</span><br><span class="line">    for item in users_dic[userid]:</span><br><span class="line">        for neighbor in item_dic[item[0]]:</span><br><span class="line">            if neighbor != userid and neighbor not in neighbors:</span><br><span class="line">                # 共同喜欢item物品的用户</span><br><span class="line">                neighbors.append(neighbor)</span><br><span class="line"></span><br><span class="line">    neighbors_dist = []</span><br><span class="line">    for neighbor in neighbors:</span><br><span class="line">        # calcSimlaryCosDist  calcCosDist  calcCosDistSpe</span><br><span class="line">        dist = calcSimlaryCosDist(users_dic[userid], users_dic[neighbor])</span><br><span class="line">        neighbors_dist.append([dist, neighbor])</span><br><span class="line">    neighbors_dist.sort(reverse=True)</span><br><span class="line">    # print neighbors_dist</span><br><span class="line">    return neighbors_dist</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#</span><br><span class="line">#   使用UserFC进行推荐</span><br><span class="line">#   输入：文件名,用户ID,邻居数量</span><br><span class="line">#   输出：推荐的电影ID,输入用户的电影列表,电影对应用户的反序表，邻居列表</span><br><span class="line">#</span><br><span class="line">def recommendByUserFC(file_name, userid, k=5):</span><br><span class="line">    # 读取文件数据</span><br><span class="line">    test_contents = readFile(file_name)</span><br><span class="line"></span><br><span class="line">    # 文件数据格式化成二维数组 List[[用户id,电影id,电影评分]...]</span><br><span class="line">    test_rates = getRatingInformation(test_contents)</span><br><span class="line"></span><br><span class="line">    # 格式化成字典数据</span><br><span class="line">    #    1.用户字典：dic[用户id]=[(电影id,电影评分)...]</span><br><span class="line">    #    2.电影字典：dic[电影id]=[用户id1,用户id2...]</span><br><span class="line">    test_user_dic, test_item_to_user = createUserRankDic(test_rates)</span><br><span class="line"></span><br><span class="line">    # 邻近用户列表：[(和指定用户的距离,用户id)...]</span><br><span class="line">    neighbors = calcNearestNeighbor(userid, test_user_dic, test_item_to_user)[:k]</span><br><span class="line"></span><br><span class="line">    # 推荐列表：&#123;&quot;电影id&quot;:&quot;累计推荐得分&quot;...&#125;</span><br><span class="line">    recommend_dic = &#123;&#125;</span><br><span class="line">    for neighbor in neighbors:</span><br><span class="line">        neighbor_user_id = neighbor[1]</span><br><span class="line">        movies = test_user_dic[neighbor_user_id]</span><br><span class="line">        for movie in movies:</span><br><span class="line">            if movie[0] not in recommend_dic:</span><br><span class="line">                recommend_dic[movie[0]] = neighbor[0]</span><br><span class="line">            else:</span><br><span class="line">                # 累计推荐得分</span><br><span class="line">                recommend_dic[movie[0]] += neighbor[0]</span><br><span class="line"></span><br><span class="line">    # 建立推荐列表：[(累计推荐得分,电影id)...]</span><br><span class="line">    recommend_list = []</span><br><span class="line">    for key in recommend_dic:</span><br><span class="line">        # print key</span><br><span class="line">        recommend_list.append([recommend_dic[key], key])</span><br><span class="line"></span><br><span class="line">    # 按得分排序</span><br><span class="line">    recommend_list.sort(reverse=True)</span><br><span class="line">    # 指定用户喜欢的电影列表</span><br><span class="line">    user_movies = [i[0] for i in test_user_dic[userid]]</span><br><span class="line"></span><br><span class="line">    return [i[1] for i in recommend_list], user_movies, test_item_to_user, neighbors</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#   获取电影的列表，格式：电影id,电影名,电影发布时间</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">def getMoviesList(file_name):</span><br><span class="line">    # print sys.getdefaultencoding()</span><br><span class="line">    movies_contents = readFile(file_name)</span><br><span class="line">    movies_info = &#123;&#125;</span><br><span class="line">    for movie in movies_contents[1:]:</span><br><span class="line">        movie_info = movie.split(&quot;,&quot;)</span><br><span class="line">        movies_info[int(movie_info[0])] = movie_info[1:]</span><br><span class="line">    return movies_info</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 主程序</span><br><span class="line"># 输入 ： 测试数据集合</span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    # reload(sys)</span><br><span class="line">    # sys.setdefaultencoding(&apos;utf-8&apos;)</span><br><span class="line">    movies = getMoviesList(&quot;E:\\data_mining\\recommend\\ml-latest-small\\movies.csv&quot;)</span><br><span class="line">    # 推荐电影列表：[&quot;电影id&quot;...]</span><br><span class="line">    # 指定用户喜欢的电影列表：[&quot;电影id&quot;...]</span><br><span class="line">    # 电影字典：dic[电影id]=[用户id1,用户id2...]</span><br><span class="line">    # 邻近用户列表：[(和指定用户的距离,用户id)...]</span><br><span class="line">    recommend_list, user_movie, items_movie, neighbors = recommendByUserFC(&quot;E:\\data_mining\\recommend\\ml-latest-small\\ratings.csv&quot;, 179, 80)</span><br><span class="line">    # 所有邻近的用户列表：[&quot;用户id&quot;...]</span><br><span class="line">    neighbors_id = [i[1] for i in neighbors]</span><br><span class="line">    table = Texttable()</span><br><span class="line">    table.set_deco(Texttable.HEADER)</span><br><span class="line">    # t: text</span><br><span class="line">    # f: float (decimal)</span><br><span class="line">    # e: float (exponent)</span><br><span class="line">    # i: integer</span><br><span class="line">    # a: automatic</span><br><span class="line">    table.set_cols_dtype([&apos;t&apos;, &apos;t&apos;, &apos;t&apos;])</span><br><span class="line">    # l: left</span><br><span class="line">    # r: right</span><br><span class="line">    # c: center</span><br><span class="line">    table.set_cols_align([&quot;l&quot;, &quot;l&quot;, &quot;l&quot;])</span><br><span class="line">    rows = []</span><br><span class="line">    rows.append([&quot;movie name&quot;, &quot;release&quot;, &quot;from userid&quot;])</span><br><span class="line">    # 前20推荐电影id</span><br><span class="line">    for movie_id in recommend_list[:20]:</span><br><span class="line">        from_user = []</span><br><span class="line">        # 喜欢该电影的所有用户id</span><br><span class="line">        for user_id in items_movie[movie_id]:</span><br><span class="line">            # 并且为邻近用户</span><br><span class="line">            if user_id in neighbors_id:</span><br><span class="line">                from_user.append(str(user_id))</span><br><span class="line">        # 取出电影的信息</span><br><span class="line">        rows.append([movies[movie_id][0], movies[movie_id][1], &apos;,&apos;.join(from_user)])</span><br><span class="line">    table.add_rows(rows)</span><br><span class="line">    print(table.draw())</span><br></pre></td></tr></table></figure></p>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2018/07/04/Funny-Website/">Funny Website</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2018-07-04
        </span>
        
        
      </div>
    </header>

    
    


    <div class="post-content">
      
        
        

        
          <p>Sentdex Blog: <a href="https://pythonprogramming.net/" target="_blank" rel="noopener">https://pythonprogramming.net/</a><br>Sentdex Youtube: <a href="https://www.youtube.com/user/sentdex/featured?pbjreload=10" target="_blank" rel="noopener">https://www.youtube.com/user/sentdex/featured?pbjreload=10</a></p>
<p>WSL(Windows Subsystem for Linux): <a href="https://chocolatey.org/" target="_blank" rel="noopener">https://chocolatey.org/</a></p>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2018/07/03/JaccardSimilarity计算文本相似度/">JaccardSimilarity计算文本相似度</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2018-07-03
        </span>
        
        
      </div>
    </header>

    
    


    <div class="post-content">
      
        
        

        
          <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding=utf-8 -*-</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line"># refer to : https://github.com/wyh267/myCodeLib/blob/master/Src/textDiff/JaccardSimilarity.py</span><br><span class="line">#</span><br><span class="line"># 利用jaccard similarity 计算文本相似度</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line">import os</span><br><span class="line">import time</span><br><span class="line">import progressbar</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#############################################</span><br><span class="line">#</span><br><span class="line"># 读取文件，保存到一个字符串中</span><br><span class="line"># 输入： 文件名完整路径</span><br><span class="line"># 输出： 文件内容</span><br><span class="line">#</span><br><span class="line">#############################################</span><br><span class="line">def read_file(file_name):</span><br><span class="line">    f = open(file_name, &quot;r&quot;)</span><br><span class="line">    file_contents = f.read()</span><br><span class="line">    file_contents = file_contents.replace(&quot;\t&quot;, &quot;&quot;)</span><br><span class="line">    file_contents = file_contents.replace(&quot;\r&quot;, &quot;&quot;)</span><br><span class="line">    file_contents = file_contents.replace(&quot;\n&quot;, &quot;&quot;)</span><br><span class="line">    f.close()</span><br><span class="line">    return file_contents</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#############################################</span><br><span class="line">#</span><br><span class="line"># 分割字符串，使用k-shingle方式进行分割</span><br><span class="line"># 输入：字符串，k值</span><br><span class="line"># 输出：分割好的字符串，存入数组中</span><br><span class="line">#</span><br><span class="line">#############################################</span><br><span class="line">def split_contents(content, k=5):</span><br><span class="line">    content_split = []</span><br><span class="line">    for i in range(len(content) - k):</span><br><span class="line">        content_split.append(content[i:i + k])</span><br><span class="line">    return content_split</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#############################################</span><br><span class="line">#</span><br><span class="line"># 将数据保存到hash表中，也就是某个集合</span><br><span class="line"># 输入：已经分隔好的数据</span><br><span class="line"># 输出：hash表</span><br><span class="line">#</span><br><span class="line">#############################################</span><br><span class="line">def hash_contents_list(content_list):</span><br><span class="line">    hash_content = &#123;&#125;</span><br><span class="line">    for i in content_list:</span><br><span class="line">        if i in hash_content:</span><br><span class="line">            hash_content[i] = hash_content[i] + 1</span><br><span class="line">        else:</span><br><span class="line">            hash_content[i] = 1</span><br><span class="line">    return hash_content</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#############################################</span><br><span class="line">#</span><br><span class="line"># 计算交集</span><br><span class="line"># 输入：两个hash表</span><br><span class="line"># 输出：交集的整数</span><br><span class="line">#</span><br><span class="line">#############################################</span><br><span class="line">def calc_intersection(hash_a, hash_b):</span><br><span class="line">    intersection = 0</span><br><span class="line">    if (len(hash_a) &lt;= len(hash_b)):</span><br><span class="line">        hash_min = hash_a</span><br><span class="line">        hash_max = hash_b</span><br><span class="line">    else:</span><br><span class="line">        hash_min = hash_b</span><br><span class="line">        hash_max = hash_a</span><br><span class="line"></span><br><span class="line">    for key in hash_min:</span><br><span class="line">        if key in hash_max:</span><br><span class="line">            if (hash_min[key] &lt;= hash_max[key]):</span><br><span class="line">                intersection = intersection + hash_min[key]</span><br><span class="line">            else:</span><br><span class="line">                intersection = intersection + hash_max[key]</span><br><span class="line"></span><br><span class="line">    return intersection</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#############################################</span><br><span class="line">#</span><br><span class="line"># 计算并集</span><br><span class="line"># 输入：两个hash表</span><br><span class="line"># 输出：并集的整数</span><br><span class="line">#</span><br><span class="line">#############################################</span><br><span class="line">def calc_union_set(hash_a, hash_b, intersection):</span><br><span class="line">    union_set = 0</span><br><span class="line"></span><br><span class="line">    for key in hash_a:</span><br><span class="line">        union_set = union_set + hash_a[key]</span><br><span class="line">    for key in hash_b:</span><br><span class="line">        union_set = union_set + hash_b[key]</span><br><span class="line"></span><br><span class="line">    return union_set - intersection</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#############################################</span><br><span class="line">#</span><br><span class="line"># 计算相似度</span><br><span class="line"># 输入：交集和并集</span><br><span class="line"># 输出：相似度</span><br><span class="line">#   </span><br><span class="line">#############################################</span><br><span class="line">def calc_similarity(intersection, union_set):</span><br><span class="line">    if (union_set &gt; 0):</span><br><span class="line">        return float(intersection) / float(union_set)</span><br><span class="line">    else:</span><br><span class="line">        return 0.0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#############################################</span><br><span class="line">#</span><br><span class="line"># 从某个文本文件获取一个集合，该集合保存了文本中单词的出现频率</span><br><span class="line"># 输入：文件名，k值,默认为5</span><br><span class="line"># 输出：一个词频的hash表</span><br><span class="line">#</span><br><span class="line">#############################################</span><br><span class="line">def get_hash_info_from_file(file_name, k=5):</span><br><span class="line">    content = read_file(file_name)</span><br><span class="line">    content_list = split_contents(content, k)</span><br><span class="line">    hash_content = hash_contents_list(content_list)</span><br><span class="line">    return hash_content</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#############################################</span><br><span class="line">#</span><br><span class="line"># 获取文件列表</span><br><span class="line"># 输入：目录名</span><br><span class="line"># 输出：文件列表，文件名列表</span><br><span class="line">#</span><br><span class="line">############################################# </span><br><span class="line">def collect_file_list(file_path):</span><br><span class="line">    print(&quot;获取文件列表....&quot;)</span><br><span class="line">    start = time.time()</span><br><span class="line">    file_name_list = []</span><br><span class="line">    file_names = []</span><br><span class="line">    for parent, dirnames, filenames in os.walk(file_path):</span><br><span class="line">        # print filenames</span><br><span class="line">        for file_name in filenames:</span><br><span class="line">            if (file_name[-4:] == &quot;.txt&quot;):</span><br><span class="line">                file_name_list.append(file_path + file_name)</span><br><span class="line">                file_names.append(file_name)</span><br><span class="line">    end = time.time()</span><br><span class="line">    print(&quot;获取文件列表结束，用时: &quot; + str(end - start) + u&quot;秒&quot;)</span><br><span class="line">    return file_name_list, file_names</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#############################################</span><br><span class="line">#</span><br><span class="line"># 获取每个文件词汇</span><br><span class="line"># 输入：文件列表</span><br><span class="line"># 输出：词汇表列表</span><br><span class="line">#</span><br><span class="line">############################################# </span><br><span class="line">def get_all_files_words_list(file_name_list, file_names, k=5):</span><br><span class="line">    print(&quot;获取每个文本的词汇词频表....&quot;)</span><br><span class="line">    start = time.time()</span><br><span class="line">    hash_contents = []</span><br><span class="line">    all = float(len(file_name_list))</span><br><span class="line">    pos = 0.0</span><br><span class="line">    pro = progressbar.ProgressBar().start()</span><br><span class="line">    # 获取每个文本的词汇词频表</span><br><span class="line">    for index, file_name in enumerate(file_name_list):</span><br><span class="line">        pos = pos + 1</span><br><span class="line">        rate_num = int(pos / all * 100)</span><br><span class="line">        pro.update(rate_num)</span><br><span class="line">        # time.sleep(0.1)</span><br><span class="line">        hash_contents.append([get_hash_info_from_file(file_name, k), file_names[index]])</span><br><span class="line"></span><br><span class="line">    pro.finish()</span><br><span class="line">    end = time.time()</span><br><span class="line">    print(&quot;获取每个文本的词汇词频表结束，用时: &quot; + str(end - start) + u&quot;秒&quot;)</span><br><span class="line">    return hash_contents</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#############################################</span><br><span class="line">#</span><br><span class="line"># 计算两两相似度</span><br><span class="line"># 输入：哈希数据列表</span><br><span class="line"># 输出：相似度数组</span><br><span class="line">#</span><br><span class="line">############################################# </span><br><span class="line">def calc_each_similar(hash_contents):</span><br><span class="line">    print(&quot;计算所有文本互相之间的相似度....&quot;)</span><br><span class="line">    start = time.time()</span><br><span class="line">    similar_list = []</span><br><span class="line">    all = float(len(hash_contents))</span><br><span class="line">    pos = 0.0</span><br><span class="line">    pro = progressbar.ProgressBar().start()</span><br><span class="line">    for index1, v1 in enumerate(hash_contents):</span><br><span class="line">        pos = pos + 1</span><br><span class="line">        rate_num = int(pos / all * 100)</span><br><span class="line">        pro.update(rate_num)</span><br><span class="line">        # time.sleep(0.1)</span><br><span class="line">        # print &quot;%02d&quot; % int(pos/all*100),</span><br><span class="line">        for index2, v2 in enumerate(hash_contents):</span><br><span class="line">            if (v1[1] != v2[1] and index2 &gt; index1):</span><br><span class="line">                intersection = calc_intersection(v1[0], v2[0])  # 计算交集</span><br><span class="line">                union_set = calc_union_set(v1[0], v2[0], intersection)  # 计算并集</span><br><span class="line">                similar = calc_similarity(intersection, union_set)</span><br><span class="line">                similar_list.append([similar, v1[1], v2[1]])</span><br><span class="line">                # print v1[1]+ &quot;||||||&quot; + v2[1] + &quot; similarity is : &quot; + str(calcSimilarity(intersection,union_set)) #计算相似度</span><br><span class="line">    pro.finish()</span><br><span class="line">    similar_list.sort()</span><br><span class="line">    similar_list.reverse()</span><br><span class="line">    end = time.time()</span><br><span class="line">    print(&quot;计算所有文本互相之间的相似度结束，用时: &quot; + str(end - start) + u&quot;秒&quot;)</span><br><span class="line">    return similar_list</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#############################################</span><br><span class="line">#</span><br><span class="line"># 主程序</span><br><span class="line"># 输入:路径和k-shingle中的k值</span><br><span class="line"># 输出:两两相似度数组</span><br><span class="line">#</span><br><span class="line">#############################################</span><br><span class="line">def calc_similarity_by_words(file_path, k=5):</span><br><span class="line">    # 获取文件列表</span><br><span class="line">    file_name_list, file_names = collect_file_list(file_path)</span><br><span class="line">    # 获取每个文件词汇</span><br><span class="line">    hash_contents = get_all_files_words_list(file_name_list, file_names, k)</span><br><span class="line">    # 计算文件的相似度</span><br><span class="line">    res = calc_each_similar(hash_contents)</span><br><span class="line">    return res</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(calc_similarity_by_words(&quot;G:\\temp\\&quot;))</span><br></pre></td></tr></table></figure>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2018/05/24/个人文档记录/">个人文档记录</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2018-05-24
        </span>
        
        
      </div>
    </header>

    
    


    <div class="post-content">
      
        
        

        
          <h5 id="RAP返回信息模板"><a href="#RAP返回信息模板" class="headerlink" title="RAP返回信息模板"></a>RAP返回信息模板</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;ret&quot;:&quot;&quot;,&quot;msg&quot;:&quot;&quot;,&quot;data&quot;:&#123;&#125;&#125;</span><br></pre></td></tr></table></figure>
<h5 id="Windows-10-hosts文件位置"><a href="#Windows-10-hosts文件位置" class="headerlink" title="Windows 10 hosts文件位置"></a>Windows 10 hosts文件位置</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Windows\System32\Drivers\etc\hosts</span><br></pre></td></tr></table></figure>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2018/05/16/CopyOnWriteArrayList的原理和方法/">CopyOnWriteArrayList的原理和方法</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2018-05-16
        </span>
        
        
      </div>
    </header>

    
    


    <div class="post-content">
      
        
        

        
          <h4 id="对比遍历有更新操作"><a href="#对比遍历有更新操作" class="headerlink" title="对比遍历有更新操作"></a>对比遍历有更新操作</h4><h5 id="ArrayList普通数组"><a href="#ArrayList普通数组" class="headerlink" title="ArrayList普通数组"></a>ArrayList普通数组</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.Iterator;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">public class CopyOnWriteArrayListTest &#123;</span><br><span class="line"></span><br><span class="line">    static List&lt;Integer&gt; list = new ArrayList()&#123;&#123;add(20);add(30);add(40);&#125;&#125;;</span><br><span class="line">    static class Thread1 extends Thread &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void run() &#123;</span><br><span class="line">            Iterator iterator = list.iterator();</span><br><span class="line">            System.out.print(&quot;1 : &quot;);</span><br><span class="line">            // 仅仅打印数组的第一个元素</span><br><span class="line">            if (iterator.hasNext()) &#123;</span><br><span class="line">                System.out.print(iterator.next() + &quot;  &quot;);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println();</span><br><span class="line">            try &#123;</span><br><span class="line">                sleep(2000);</span><br><span class="line">            &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            // 打印数组剩下的元素</span><br><span class="line">            System.out.print(&quot;2 : &quot;);</span><br><span class="line">            while (iterator.hasNext()) &#123;</span><br><span class="line">                System.out.print(iterator.next() + &quot;  &quot;);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    static class Thread2 extends Thread &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void run() &#123;</span><br><span class="line">            list.add(50);</span><br><span class="line">            System.out.println(&quot;2 : &quot; + list);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        new Thread1().start();</span><br><span class="line">        new Thread2().start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果抛出异常信息：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread &quot;Thread-0&quot; 2 : java.util.ConcurrentModificationException</span><br><span class="line">       at java.util.ArrayList$Itr.checkForComodification(ArrayList.java:901)</span><br><span class="line">       at java.util.ArrayList$Itr.next(ArrayList.java:851)</span><br><span class="line">       at cn.com.xbed.csbapp.service.impl.CopyOnWriteArrayListTest$Thread1.run(CopyOnWriteArrayListTest.java:29)</span><br></pre></td></tr></table></figure></p>
<h5 id="CopyOnWriteArrayList复制写入数组"><a href="#CopyOnWriteArrayList复制写入数组" class="headerlink" title="CopyOnWriteArrayList复制写入数组"></a>CopyOnWriteArrayList复制写入数组</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">import java.util.Iterator;</span><br><span class="line">import java.util.concurrent.CopyOnWriteArrayList;</span><br><span class="line"></span><br><span class="line">public class CopyOnWriteArrayListTest &#123;</span><br><span class="line"></span><br><span class="line">    static Integer[] os = new Integer[]&#123;20, 30, 40&#125;;</span><br><span class="line">    static CopyOnWriteArrayList&lt;Integer&gt; list = new CopyOnWriteArrayList(os);</span><br><span class="line">    static class Thread1 extends Thread &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void run() &#123;</span><br><span class="line">            Iterator iterator = list.iterator();</span><br><span class="line">            System.out.print(&quot;1 : &quot;);</span><br><span class="line">            // 仅仅打印数组的第一个元素</span><br><span class="line">            if (iterator.hasNext()) &#123;</span><br><span class="line">                System.out.print(iterator.next() + &quot;  &quot;);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println();</span><br><span class="line">            try &#123;</span><br><span class="line">                sleep(2000);</span><br><span class="line">            &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            // 打印数组剩下的元素</span><br><span class="line">            // 还是初始拿到的数组，更新后的数组不会在这里</span><br><span class="line">            System.out.print(&quot;2 : &quot;);</span><br><span class="line">            while (iterator.hasNext()) &#123;</span><br><span class="line">                System.out.print(iterator.next() + &quot;  &quot;);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    static class Thread2 extends Thread &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void run() &#123;</span><br><span class="line">            // 复制新数组，再写入，不会影响已遍历的</span><br><span class="line">            list.add(50);</span><br><span class="line">            System.out.println(&quot;2 : &quot; + list);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        new Thread1().start();</span><br><span class="line">        new Thread2().start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2018/05/11/各种排序算法比较/">各种排序算法比较</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2018-05-11
        </span>
        
        
      </div>
    </header>

    
    


    <div class="post-content">
      
        
        

        
          <h4 id="各种排序算法比较"><a href="#各种排序算法比较" class="headerlink" title="各种排序算法比较"></a>各种排序算法比较</h4><p><img src="http://p7240jy2w.bkt.clouddn.com/%E5%90%84%E7%A7%8D%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E6%AF%94%E8%BE%8320180510.png" alt="avata"></p>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2018/05/11/C语言读写文件详解/">C语言读写文件详解</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2018-05-11
        </span>
        
        
      </div>
    </header>

    
    


    <div class="post-content">
      
        
        

        
          <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    // 写入模式</span><br><span class="line">    FILE* writer = fopen(&quot;C:\\data.txt&quot;, &quot;w&quot;);</span><br><span class="line">    if (writer == NULL)</span><br><span class="line">    &#123;</span><br><span class="line">        return 0;</span><br><span class="line">    &#125;</span><br><span class="line">    for (int i = 0; i &lt; 10; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        fprintf(writer, &quot;%d &quot;, i);</span><br><span class="line">    &#125;</span><br><span class="line">    fclose(writer);</span><br><span class="line"></span><br><span class="line">    // 读入模式</span><br><span class="line">    FILE* reader = fopen(&quot;C:\\data.txt&quot;, &quot;r&quot;);</span><br><span class="line">    if (reader == NULL)</span><br><span class="line">    &#123;</span><br><span class="line">        return 0;</span><br><span class="line">    &#125;</span><br><span class="line">    int nums[10] = &#123;0&#125;;</span><br><span class="line">    for (int i = 0; i &lt; 10; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        fscanf(reader, &quot;%d &quot;, &amp;nums[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    // 打印保存的值</span><br><span class="line">    for (int i = 0; i &lt; 10; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        printf(&quot;%d &quot;, i);</span><br><span class="line">    &#125;</span><br><span class="line">    fclose(reader);</span><br><span class="line"></span><br><span class="line">    return 1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2018/05/11/cplusplus文件读写详解/">C++文件读写详解</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2018-05-11
        </span>
        
        
      </div>
    </header>

    
    


    <div class="post-content">
      
        
        

        
          <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">// 文件流包</span><br><span class="line">#include &lt;fstream&gt;</span><br><span class="line">// 读取一行需要存在字符串中</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line"></span><br><span class="line">// ifstream是在名称空间std下的，必须引入这个包</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    ifstream ifs(&quot;C:\\test.txt&quot;);</span><br><span class="line">    ofstream ofs(&quot;C:\\test1.txt&quot;);</span><br><span class="line">    string s;</span><br><span class="line"></span><br><span class="line">    // 读写一行数据，直到读写内容为空</span><br><span class="line">    while (getline(ifs, s) != NULL)</span><br><span class="line">    &#123;</span><br><span class="line">        // 写入到文件</span><br><span class="line">        ofs &lt;&lt; s &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    ofs.flush();</span><br><span class="line">    ofs.close();</span><br><span class="line"></span><br><span class="line">    ifs.close();</span><br><span class="line">    </span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2018/05/10/队列的链式存储结构/">队列的链式存储结构</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2018-05-10
        </span>
        
        
      </div>
    </header>

    
    


    <div class="post-content">
      
        
        

        
          <h4 id="算法实现"><a href="#算法实现" class="headerlink" title="算法实现"></a>算法实现</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line">// 队头出队；队尾入队</span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line"></span><br><span class="line">#define OK 1</span><br><span class="line">#define OVERFLOW -2</span><br><span class="line">#define ERROR -1</span><br><span class="line"></span><br><span class="line">typedef int Status;</span><br><span class="line">typedef char QElemType;</span><br><span class="line"></span><br><span class="line">// 队列结点</span><br><span class="line">typedef struct QNode</span><br><span class="line">&#123;</span><br><span class="line">    QElemType data;</span><br><span class="line">    struct QNode *next;</span><br><span class="line">&#125; QNode, *QNodePtr;</span><br><span class="line"></span><br><span class="line">// 链式队列</span><br><span class="line">typedef struct </span><br><span class="line">&#123;</span><br><span class="line">    QNodePtr front;</span><br><span class="line">    QNodePtr rear;</span><br><span class="line">&#125; LinkQueue;</span><br><span class="line"></span><br><span class="line">// 初始化队列</span><br><span class="line">Status InitQueue(LinkQueue *L)</span><br><span class="line">&#123;</span><br><span class="line">    // 创建头结点</span><br><span class="line">    QNode *head = (QNodePtr)malloc(sizeof(QNode));</span><br><span class="line">    if (head == NULL)</span><br><span class="line">    &#123;</span><br><span class="line">        return OVERFLOW;</span><br><span class="line">    &#125;</span><br><span class="line">    head-&gt;data = &apos; &apos;;</span><br><span class="line">    head-&gt;next = NULL;</span><br><span class="line">    // 同时指向头结点</span><br><span class="line">    L-&gt;front = L-&gt;rear = head;</span><br><span class="line"></span><br><span class="line">    return OK;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 入队</span><br><span class="line">Status EnQueue(LinkQueue *L, QElemType e)</span><br><span class="line">&#123;</span><br><span class="line">    // 创建结点</span><br><span class="line">    QNode* node = (QNodePtr)malloc(sizeof(QNode));</span><br><span class="line">    if (!node) </span><br><span class="line">    &#123;</span><br><span class="line">        return OVERFLOW;</span><br><span class="line">    &#125;</span><br><span class="line">    node-&gt;data = e;</span><br><span class="line">    node-&gt;next = NULL;</span><br><span class="line"></span><br><span class="line">    // 尾指针指向该节点</span><br><span class="line">    L-&gt;rear-&gt;next = node;</span><br><span class="line">    L-&gt;rear = node;</span><br><span class="line">    </span><br><span class="line">    return OK;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 出队</span><br><span class="line">Status DeQueue(LinkQueue *L, QElemType *e)</span><br><span class="line">&#123;</span><br><span class="line">    // 判空</span><br><span class="line">    if (L-&gt;front == L-&gt;rear)</span><br><span class="line">    &#123;</span><br><span class="line">        return ERROR;</span><br><span class="line">    &#125;</span><br><span class="line">    QNode* p = L-&gt;front-&gt;next;</span><br><span class="line">    // 保存元素</span><br><span class="line">    (*e) = p-&gt;data;</span><br><span class="line">    // 删除元素</span><br><span class="line">    L-&gt;front-&gt;next = p-&gt;next;</span><br><span class="line"></span><br><span class="line">    if (L-&gt;rear == p)</span><br><span class="line">    &#123;</span><br><span class="line">        L-&gt;rear = L-&gt;front;</span><br><span class="line">    &#125;</span><br><span class="line">    free(p);</span><br><span class="line"></span><br><span class="line">    return OK;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void Traverse(LinkQueue L)</span><br><span class="line">&#123;</span><br><span class="line">    QNode* p = L.front-&gt;next;</span><br><span class="line">    // 跳过头结点</span><br><span class="line">    while (p != NULL) </span><br><span class="line">    &#123;</span><br><span class="line">        printf(&quot;%c &quot;, p-&gt;data);</span><br><span class="line">        p = p-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    LinkQueue L;</span><br><span class="line">    InitQueue(&amp;L);</span><br><span class="line"></span><br><span class="line">    EnQueue(&amp;L, &apos;X&apos;);</span><br><span class="line">    EnQueue(&amp;L, &apos;Y&apos;);</span><br><span class="line"></span><br><span class="line">    QElemType a;</span><br><span class="line">    DeQueue(&amp;L, &amp;a);</span><br><span class="line"></span><br><span class="line">    Traverse(L);</span><br><span class="line">    </span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

        
      
    </div>

    

    

  </article>

    
  </section>

  
  <nav class="pagination">
    
    
      <a class="next" href="/page/2/">
        <span class="next-text">下一页</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>


          </div>
          

        </div>
      </main>

      <footer id="footer" class="footer">

  <div class="social-links">
    
      
        
          <a href="mailto:your@email.com" class="iconfont icon-email" title="email"></a>
        
      
    
      
    
      
    
      
    
      
    
      
    
      
        
          <a href="https://github.com/ahonn" class="iconfont icon-github" title="github"></a>
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    
    
      <a href="/atom.xml" class="iconfont icon-rss" title="rss"></a>
    
  </div>


<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://hexo.io/">Hexo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">
    
    &copy; 
     
      2015 - 
    
    2018

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">Fomeiherz</span>
  </span>
</div>

      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    


    
  



  
  





  
    <script type="text/javascript" src="/lib/jquery/jquery.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  

  
    <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  

  
    <script type="text/javascript" src="/lib/pjax/jquery.pjax.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/nprogress/nprogress.min.js"></script>
  


    <script type="text/javascript" src="/js/src/even.js?v=2.9.0"></script>

  </body>
</html>
